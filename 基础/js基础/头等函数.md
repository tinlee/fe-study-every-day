# 头等函数 First-class Function

`说明：本人觉得一等函数与一等公民对应更贴切，但是在wiki上翻译为头等函数，所以在此同样是用头等函数`

## 一等公民 first class citizen
理解头等函数，先要理解一等公民。

一等公民，从字面上理解，就是一种地位很高的公民，类似贵族或者大地主，可以出入一些平民百姓不可以出入的地方，做一些平民百姓不能做的事。在编程世界中，一等公民是指支持其他实体通常可用的所有操作的实体。

一等公民应该具有以下几个特征
- 可以被当作参数传递
- 可以作为另一个函数的返回值
- 可以被赋值给一个变量

例如，字符串在几乎所有编程语言中都是一等公民，字符串可以做为函数参数，字符串可以作为函数返回值，字符串也可以赋值给变量。

对于 JavaScript 来说，函数可以赋值给变量，也可以作为函数参数，还可以作为函数返回值，因此 JavaScript 中函数是一等公民，即为头等函数。

除了一等公民，还有二等三等如下：
- First Class。该类型的值可以作为函数的参数和返回值，也可以赋给变量。
- Second Class。该类型的值可以作为函数的参数，但不能从函数返回，也不能赋给变量。
- Third Class。该类型的值作为函数参数也不行

## 何为头等函数

当一门编程语言的函数可以被当作变量一样用时，则称这门语言拥有头等函数。例如，在这门语言中，函数可以被当作参数传递给其他函数，可以作为另一个函数的返回值，还可以被赋值给一个变量。有人主张应包括支持匿名函数（函数字面量，function literals）。

所以广义的头等函数应该具有以下几个特征
- 函数可以被当作参数传递
- 函数可以作为另一个函数的返回值
- 函数可以被赋值给一个变量
- 支持匿名函数（可选）

狭义的头等函数，包含（高阶函数，嵌套函数，偏应用函数），将在后面部分作为补充。

对于各种编程语言来说，函数就不一定是一等公民了，比如Java 8 之前的版本。

## js中的函数

js中当然满足上面所列举的相关条件，如下

``` js
// 函数赋值给了一个变量fun
const fun=(callback)=>{
    
    // fun函数的返回值为一个函数，同时也是一个匿名函数
    return ()=>{
        callback()
    }
}
function fun2(){
    console.log('First-class Function')
}
// fun2作为一个参数传递给了fun
fun(fun2)()

```

## 非头等函数
对于现代语言来说，想要举出不是头等函数例子的语言已经比较少了。